<%- include("./partials/header.ejs") %>

<body>
    <%- include("partials/navbar.ejs") %>

    <div class="wrapper">
        <div class="table-header">
            <div id="filtering">
                <button id="create_community" type="button" class="btn btn-primary" onclick="pjax.loadUrl('/communities/new')" style="margin: 5px;">Create New Community</button>
                <div>
                    Showing <select oninput="show_entries(this.value)">
                    <option value="15">15</option>
                    <option value="30">30</option>
                    <option value="60">60</option>
                    <option value="80">80</option>
                    <option value="<%= num_communities %>"><%= num_communities %></option>
                    </select>Communities
                </div>

                <input placeholder="Community Name.." id="sort-community-name" type="search" oninput="search_communities_by_name(this.value)">
            </div>
        </div>
        <table id="community_table" class="table table-striped table-bordered" style="padding: 20px;">
            <thead class="thead-dark">
                <tr>
                    <th style="width: 10px;">Icon</th>
                    <th>ID</th>
                    <th id="platform">Platform</th>
                    <th id="type">Type</th>
                    <th id="post_type">PType</th>
                    <th id="ingame">InGame</th>
                    <th>Community Name</th>
                    <th id="description">Description</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <% for (let i=0; i < communities.length; i++) { const community=communities[i];%>

                    <tr <%= (i >= 15) ? 'style=display:none' : "" %>>
                        <td><img src="/img/icons/<%= community.id %>.jpg" width="65px"></td>
                        <td><%= community.id %></td>
                        <td id="platform"><%= community.platform %></td>
                        <td id="type"><%= community.type %></td>
                        <td id="post_type"><%= community.post_type %></td>
                        <td id="ingame"><%= community.ingame_only %></td>
                        <td><%= community.name %></td>
                        <td id="description"><%= community.description %></td>
                        <td>
                            <div class="options_container">
                                <button type="button" class="btn btn-primary" onclick="pjax.loadUrl('/communities/<%= community.id %>/posts')">See Posts</button>
                                <button type="button" class="btn btn-info" onclick="pjax.loadUrl('/communities/<%= community.id %>')">Edit</button>
                            </div>
                        </td>
                    </tr>
                    <%} %>
            </tbody>
        </table>
    </div>
    
</body>

</html>